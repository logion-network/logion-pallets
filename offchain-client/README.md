# offchain-client

This package essentially contains some code written in RUST that
* connects to a Logion para- or solo-chain.
* displays some info queried in the storage.

Among others, one possible usage is to write migrations that do not fit in one block.

It relies on **subxt** ([doc](https://docs.rs/subxt/) /
[book](https://docs.rs/subxt/latest/subxt/book/index.html) /
[github](https://github.com/paritytech/subxt) /
[examples](https://github.com/paritytech/subxt/tree/master/subxt/examples))

### Create metadata from a running node

1. Pre-requisite: install [subxt-cli](https://github.com/paritytech/subxt/tree/master/cli):

```shell
cargo install subxt-cli
```

2. Generate metadata
Similarly to typescript, metadata are generated by running this command
`nnn` is the value `spec_version`.
```shell
subxt metadata --url wss://dev-rpc01.logion.network -f bytes > ./metadata/logion-nnn.scale
subxt metadata --url wss://dev-rpc01.logion.network -f json > ./metadata/logion-nnn.json
```
Note that json format is not directly used but is useful for comparing metadata from different nodes/versions.

The generated scale file need to be references in the code:
```rust
#[subxt::subxt(runtime_metadata_path = "metadata/logion-nnn.scale")]
pub mod polkadot {}
```
### Run the client

```shell
cargo run
```
